(self.webpackChunknextjs_template=self.webpackChunknextjs_template||[]).push([[2698],{"./node_modules/@bundled-es-modules/tough-cookie sync recursive":module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="./node_modules/@bundled-es-modules/tough-cookie sync recursive",module.exports=webpackEmptyContext},"./src/stories/pages/OwnerRegistrationsPage.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DarkMode:()=>DarkMode,Default:()=>Default,EmptyState:()=>EmptyState,ErrorState:()=>ErrorState,LoadingState:()=>LoadingState,ReviewingRegistration:()=>ReviewingRegistration,__namedExportsOrder:()=>__namedExportsOrder,default:()=>OwnerRegistrationsPage_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),mockNextAuth=__webpack_require__("./.storybook/mockNextAuth.ts"),mockToastify=__webpack_require__("./.storybook/mockToastify.ts"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),next_link=__webpack_require__("./node_modules/next/link.js"),link_default=__webpack_require__.n(next_link),client=__webpack_require__("./src/lib/i18n/client.tsx"),arrow_left=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/arrow-left.js"),clock=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/clock.js"),check=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/check.js"),x=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/x.js"),user=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/user.js");function OwnerRegistrationsPage(){const{t}=(0,client.s)(),[activeTab,setActiveTab]=(0,react.useState)("pending"),filteredRegistrations=[{id:"1",name:"John Doe",email:"john.doe@example.com",building:"A",apartment:"101",phone:"+212 600 000 001",status:"pending",createdAt:new Date(2023,4,15).toISOString()},{id:"2",name:"Jane Smith",email:"jane.smith@example.com",building:"B",apartment:"202",phone:"+212 600 000 002",status:"approved",createdAt:new Date(2023,4,10).toISOString()},{id:"3",name:"Ahmed Hassan",email:"ahmed.hassan@example.com",building:"C",apartment:"303",phone:"+212 600 000 003",status:"rejected",createdAt:new Date(2023,4,5).toISOString()}].filter((reg=>reg.status===activeTab)),formatDate=dateString=>{const date=new Date(dateString);return new Intl.DateTimeFormat("default",{year:"numeric",month:"long",day:"numeric"}).format(date)};return(0,jsx_runtime.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,jsx_runtime.jsx)("header",{className:"bg-white shadow-sm",children:(0,jsx_runtime.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center h-16",children:[(0,jsx_runtime.jsx)(link_default(),{href:"/admin",className:"text-gray-600 hover:text-gray-900 mr-4",children:(0,jsx_runtime.jsx)(arrow_left.A,{className:"h-5 w-5"})}),(0,jsx_runtime.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:t("admin.pendingRegistrations")})]})})}),(0,jsx_runtime.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,jsx_runtime.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,jsx_runtime.jsxs)("nav",{className:"flex -mb-px",children:[(0,jsx_runtime.jsx)("button",{onClick:()=>setActiveTab("pending"),className:"py-4 px-6 text-sm font-medium "+("pending"===activeTab?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center",children:[(0,jsx_runtime.jsx)(clock.A,{className:"h-4 w-4 mr-2"}),t("admin.pendingRegistrations")]})}),(0,jsx_runtime.jsx)("button",{onClick:()=>setActiveTab("approved"),className:"py-4 px-6 text-sm font-medium "+("approved"===activeTab?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center",children:[(0,jsx_runtime.jsx)(check.A,{className:"h-4 w-4 mr-2"}),t("admin.approvedRegistrations")]})}),(0,jsx_runtime.jsx)("button",{onClick:()=>setActiveTab("rejected"),className:"py-4 px-6 text-sm font-medium "+("rejected"===activeTab?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center",children:[(0,jsx_runtime.jsx)(x.A,{className:"h-4 w-4 mr-2"}),t("admin.rejectedRegistrations")]})})]})}),(0,jsx_runtime.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:filteredRegistrations.length>0?(0,jsx_runtime.jsx)("ul",{className:"divide-y divide-gray-200",children:filteredRegistrations.map((registration=>(0,jsx_runtime.jsx)("li",{children:(0,jsx_runtime.jsx)(link_default(),{href:`/admin/owner-registrations/${registration.id}`,className:"block hover:bg-gray-50",children:(0,jsx_runtime.jsxs)("div",{className:"px-4 py-4 sm:px-6",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center",children:[(0,jsx_runtime.jsx)("div",{className:"flex-shrink-0",children:(0,jsx_runtime.jsx)(user.A,{className:"h-10 w-10 rounded-full bg-gray-100 p-2 text-gray-500"})}),(0,jsx_runtime.jsxs)("div",{className:"ml-4",children:[(0,jsx_runtime.jsx)("p",{className:"text-sm font-medium text-gray-900",children:registration.name}),(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-500",children:registration.email})]})]}),(0,jsx_runtime.jsx)("div",{className:"ml-2 flex-shrink-0 flex",children:(0,jsx_runtime.jsx)("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:`${registration.building}-${registration.apartment}`})})]}),(0,jsx_runtime.jsxs)("div",{className:"mt-2 sm:flex sm:justify-between",children:[(0,jsx_runtime.jsx)("div",{className:"sm:flex",children:(0,jsx_runtime.jsx)("p",{className:"flex items-center text-sm text-gray-500",children:registration.phone})}),(0,jsx_runtime.jsx)("div",{className:"mt-2 flex items-center text-sm text-gray-500 sm:mt-0",children:(0,jsx_runtime.jsx)("p",{children:formatDate(registration.createdAt)})})]})]})})},registration.id)))}):(0,jsx_runtime.jsx)("div",{className:"text-center py-12",children:(0,jsx_runtime.jsx)("p",{className:"text-gray-500",children:t("common.noResults")})})})]})]})}OwnerRegistrationsPage.__docgenInfo={description:"",methods:[],displayName:"OwnerRegistrationsPage"};var http=__webpack_require__("./node_modules/msw/lib/core/http.mjs"),dist=__webpack_require__("./node_modules/@storybook/testing-library/dist/index.mjs"),jest_dist=__webpack_require__("./node_modules/@storybook/jest/dist/index.mjs");const mockRegistrations=[{id:"1",name:"John Doe",email:"john@example.com",buildingNumber:"A1",apartmentNumber:"101",phoneNumber:"+1 (555) 000-0001",status:"pending",createdAt:"2024-03-20T10:00:00.000Z"},{id:"2",name:"Jane Smith",email:"jane@example.com",buildingNumber:"B2",apartmentNumber:"202",phoneNumber:"+1 (555) 000-0002",status:"approved",createdAt:"2024-03-19T15:30:00.000Z",notes:"Verified through property records"},{id:"3",name:"Bob Wilson",email:"bob@example.com",buildingNumber:"C3",apartmentNumber:"303",phoneNumber:"+1 (555) 000-0003",status:"rejected",createdAt:"2024-03-18T09:15:00.000Z",notes:"Unable to verify ownership"}],OwnerRegistrationsPage_stories={title:"Pages/OwnerRegistrationsPage",component:OwnerRegistrationsPage,parameters:{layout:"fullscreen",docs:{description:{component:"Admin interface for managing owner registration requests, including approval and rejection workflows."}},msw:{handlers:[http.L.get("/api/admin/owner-registrations",(()=>new Response(JSON.stringify(mockRegistrations),{headers:{"Content-Type":"application/json"}})))]}},decorators:[Story=>(0,jsx_runtime.jsxs)(mockNextAuth.CP,{session:{user:{id:"admin-user-id",email:"admin@costabeach.com",name:"Admin User",isAdmin:!0},expires:"1"},children:[(0,jsx_runtime.jsx)(Story,{}),(0,jsx_runtime.jsx)(mockToastify.N,{})]})],tags:["autodocs"]},Default={args:{},parameters:{docs:{description:{story:"The default view showing a mix of pending, approved, and rejected registrations."}}}},EmptyState={args:{},parameters:{msw:{handlers:[http.L.get("/api/admin/owner-registrations",(()=>new Response(JSON.stringify([]),{headers:{"Content-Type":"application/json"}})))]},docs:{description:{story:"The view when there are no registration requests to review."}}}},LoadingState={args:{},parameters:{msw:{handlers:[http.L.get("/api/admin/owner-registrations",(()=>new Response(JSON.stringify(mockRegistrations),{headers:{"Content-Type":"application/json"}})))]},docs:{description:{story:"The loading state while fetching registration data."}}}},ErrorState={args:{},parameters:{msw:{handlers:[http.L.get("/api/admin/owner-registrations",(()=>new Response(JSON.stringify(null),{status:500})))]},docs:{description:{story:"The error state when failing to fetch registration data."}}}},ReviewingRegistration={args:{},parameters:{docs:{description:{story:"Demonstrates the review process for a pending registration."}}},play:async({canvasElement})=>{const canvas=(0,dist.ux)(canvasElement),reviewButton=await canvas.findByText("Review");await dist.Q4.click(reviewButton);const notesTextarea=await canvas.findByPlaceholderText("Add notes (optional)");await(0,jest_dist.E)(notesTextarea).toBeInTheDocument(),await dist.Q4.type(notesTextarea,"Ownership verified through property records");const approveButton=canvas.getByRole("button",{name:""}),rejectButton=canvas.getByRole("button",{name:""});await(0,jest_dist.E)(approveButton).toBeInTheDocument(),await(0,jest_dist.E)(rejectButton).toBeInTheDocument()}},DarkMode={args:{},parameters:{themes:{default:"dark"},docs:{description:{story:"The admin interface in dark mode."}}}},__namedExportsOrder=["Default","EmptyState","LoadingState","ErrorState","ReviewingRegistration","DarkMode"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:'{\n  args: {},\n  parameters: {\n    docs: {\n      description: {\n        story: "The default view showing a mix of pending, approved, and rejected registrations."\n      }\n    }\n  }\n}',...Default.parameters?.docs?.source}}},EmptyState.parameters={...EmptyState.parameters,docs:{...EmptyState.parameters?.docs,source:{originalSource:"{\n  args: {},\n  parameters: {\n    msw: {\n      handlers: [http.get(\"/api/admin/owner-registrations\", () => {\n        return new Response(JSON.stringify([]), {\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n      })]\n    },\n    docs: {\n      description: {\n        story: \"The view when there are no registration requests to review.\"\n      }\n    }\n  }\n}",...EmptyState.parameters?.docs?.source}}},LoadingState.parameters={...LoadingState.parameters,docs:{...LoadingState.parameters?.docs,source:{originalSource:"{\n  args: {},\n  parameters: {\n    msw: {\n      handlers: [http.get(\"/api/admin/owner-registrations\", () => {\n        return new Response(JSON.stringify(mockRegistrations), {\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n      })]\n    },\n    docs: {\n      description: {\n        story: \"The loading state while fetching registration data.\"\n      }\n    }\n  }\n}",...LoadingState.parameters?.docs?.source}}},ErrorState.parameters={...ErrorState.parameters,docs:{...ErrorState.parameters?.docs,source:{originalSource:'{\n  args: {},\n  parameters: {\n    msw: {\n      handlers: [http.get("/api/admin/owner-registrations", () => {\n        return new Response(JSON.stringify(null), {\n          status: 500\n        });\n      })]\n    },\n    docs: {\n      description: {\n        story: "The error state when failing to fetch registration data."\n      }\n    }\n  }\n}',...ErrorState.parameters?.docs?.source}}},ReviewingRegistration.parameters={...ReviewingRegistration.parameters,docs:{...ReviewingRegistration.parameters?.docs,source:{originalSource:'{\n  args: {},\n  parameters: {\n    docs: {\n      description: {\n        story: "Demonstrates the review process for a pending registration."\n      }\n    }\n  },\n  play: async ({\n    canvasElement\n  }) => {\n    const canvas = within(canvasElement);\n\n    // Find and click the first "Review" button\n    const reviewButton = await canvas.findByText("Review");\n    await userEvent.click(reviewButton);\n\n    // Verify that the review form appears\n    const notesTextarea = await canvas.findByPlaceholderText("Add notes (optional)");\n    await expect(notesTextarea).toBeInTheDocument();\n\n    // Add some notes\n    await userEvent.type(notesTextarea, "Ownership verified through property records");\n\n    // Verify approve/reject buttons are present\n    const approveButton = canvas.getByRole("button", {\n      name: ""\n    }); // Using aria-label from Check icon\n    const rejectButton = canvas.getByRole("button", {\n      name: ""\n    }); // Using aria-label from X icon\n    await expect(approveButton).toBeInTheDocument();\n    await expect(rejectButton).toBeInTheDocument();\n  }\n}',...ReviewingRegistration.parameters?.docs?.source}}},DarkMode.parameters={...DarkMode.parameters,docs:{...DarkMode.parameters?.docs,source:{originalSource:'{\n  args: {},\n  parameters: {\n    themes: {\n      default: "dark"\n    },\n    docs: {\n      description: {\n        story: "The admin interface in dark mode."\n      }\n    }\n  }\n}',...DarkMode.parameters?.docs?.source}}}},"./.storybook/mockNextAuth.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{CI:()=>signOut,CP:()=>SessionProvider,wV:()=>useSession});__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const mockSession={data:{user:{name:"Test User",email:"test@example.com",image:"https://avatars.githubusercontent.com/u/1234567?v=4"},expires:"2099-10-10T00:00:00.000Z"},status:"authenticated"};function useSession(){return mockSession}function SessionProvider({children}){return children}function signOut(){return Promise.resolve({ok:!0})}},"./.storybook/mockToastify.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{N:()=>ToastContainer,o:()=>toast});var console=__webpack_require__("./node_modules/console-browserify/index.js");const toast={success:message=>console.log("Toast success:",message),error:message=>console.log("Toast error:",message),info:message=>console.log("Toast info:",message),warning:message=>console.log("Toast warning:",message)},ToastContainer=()=>null},"?4f7e":()=>{}}]);